<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="-js," />










<meta name="description" content="1. 前言本文档的目标是使JavaScript代码风格保持一致，容易被理解和被维护。虽然本文档是针对JavaScript设计的，但是在使用各种JavaScript的预编译语言时(如TypeScript等)时，适用的部分也应尽量遵循本文档的约定。 2. 代码风格2.1. 文件[建议] JavaScript 文件使用无 BOM 的 UTF-8 编码。解释UTF-8 编码具有更广泛的适应性。BOM 在使">
<meta name="keywords" content="-js">
<meta property="og:type" content="article">
<meta property="og:title" content="JS编码规范">
<meta property="og:url" content="http://yoursite.com/2016/05/29/JS编码规范/index.html">
<meta property="og:site_name" content="Siker">
<meta property="og:description" content="1. 前言本文档的目标是使JavaScript代码风格保持一致，容易被理解和被维护。虽然本文档是针对JavaScript设计的，但是在使用各种JavaScript的预编译语言时(如TypeScript等)时，适用的部分也应尽量遵循本文档的约定。 2. 代码风格2.1. 文件[建议] JavaScript 文件使用无 BOM 的 UTF-8 编码。解释UTF-8 编码具有更广泛的适应性。BOM 在使">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-05-28T17:56:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS编码规范">
<meta name="twitter:description" content="1. 前言本文档的目标是使JavaScript代码风格保持一致，容易被理解和被维护。虽然本文档是针对JavaScript设计的，但是在使用各种JavaScript的预编译语言时(如TypeScript等)时，适用的部分也应尽量遵循本文档的约定。 2. 代码风格2.1. 文件[建议] JavaScript 文件使用无 BOM 的 UTF-8 编码。解释UTF-8 编码具有更广泛的适应性。BOM 在使">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/05/29/JS编码规范/"/>





  <title>JS编码规范 | Siker</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Siker</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Pigs might fly!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/29/JS编码规范/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Adele">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Siker">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JS编码规范</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-29T00:00:39+08:00">
                2016-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/convention/" itemprop="url" rel="index">
                    <span itemprop="name">convention</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p>本文档的目标是使JavaScript代码风格保持一致，容易被理解和被维护。<br>虽然本文档是针对JavaScript设计的，但是在使用各种JavaScript的预编译语言时(如TypeScript等)时，适用的部分也应尽量遵循本文档的约定。</p>
<h2 id="2-代码风格"><a href="#2-代码风格" class="headerlink" title="2. 代码风格"></a>2. 代码风格</h2><h2 id="2-1-文件"><a href="#2-1-文件" class="headerlink" title="2.1. 文件"></a>2.1. 文件</h2><p>[建议] JavaScript 文件使用无 BOM 的 UTF-8 编码。<br>解释<br>UTF-8 编码具有更广泛的适应性。BOM 在使用程序或工具处理文件时可能造成不必要的干扰。<br>[建议] 在文件结尾处，保留一个空行。</p>
<h2 id="2-2-结构"><a href="#2-2-结构" class="headerlink" title="2.2. 结构"></a>2.2. 结构</h2><h2 id="2-2-1-缩进"><a href="#2-2-1-缩进" class="headerlink" title="2.2.1. 缩进"></a>2.2.1. 缩进</h2><p>[强制] 使用 4 个空格做为一个缩进层级，不允许使用 2 个空格 或 tab 字符。<br>[强制] switch 下的 case 和 default 必须增加一个缩进层级。<br><a id="more"></a><br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line"></div><div class="line">switch (variable) &#123;</div><div class="line"></div><div class="line">    case &apos;1&apos;:</div><div class="line">        // do...</div><div class="line">        break;</div><div class="line"></div><div class="line">    case &apos;2&apos;:</div><div class="line">        // do...</div><div class="line">        break;</div><div class="line"></div><div class="line">    default:</div><div class="line">        // do...</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">// bad</div><div class="line">switch (variable) &#123;</div><div class="line"></div><div class="line">case &apos;1&apos;:</div><div class="line">    // do...</div><div class="line">    break;</div><div class="line"></div><div class="line">case &apos;2&apos;:</div><div class="line">    // do...</div><div class="line">    break;</div><div class="line"></div><div class="line">default:</div><div class="line">    // do...</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-2-2-空格"><a href="#2-2-2-空格" class="headerlink" title="2.2.2. 空格"></a>2.2.2. 空格</h2><p>[强制] 二元运算符两侧必须有一个空格，一元运算符与操作对象之间不允许有空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var a = !arr.length;</div><div class="line">a++;</div><div class="line">a = b + c;</div></pre></td></tr></table></figure>
<p>[强制] 用作代码块起始的左花括号 { 前必须有一个空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">if (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">while (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function funcName() &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// bad</div><div class="line">if (condition)&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">while (condition)&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function funcName()&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[强制] <code>if / else / for / while / function / switch / do / try / catch / finally</code>关键字后，必须有一个空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">if (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">while (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(function () &#123;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line">// bad</div><div class="line">if(condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">while(condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(function() &#123;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>[强制] 在对象创建时，属性中的 : 之后必须有空格，: 之前不允许有空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">var obj = &#123;</div><div class="line">    a: 1,</div><div class="line">    b: 2,</div><div class="line">    c: 3</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// bad</div><div class="line">var obj = &#123;</div><div class="line">    a : 1,</div><div class="line">    b:2,</div><div class="line">    c :3</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>[强制] 函数声明、具名函数表达式、函数调用中，函数名和 ( 之间不允许有空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">function funcName() &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var funcName = function funcName() &#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">funcName();</div><div class="line"></div><div class="line">// bad</div><div class="line">function funcName () &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var funcName = function funcName () &#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">funcName ();</div></pre></td></tr></table></figure>
<p>[强制] , 和 ; 前不允许有空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">callFunc(a, b);</div><div class="line"></div><div class="line">// bad</div><div class="line">callFunc(a , b) ;</div></pre></td></tr></table></figure>
<p>[强制] 在函数调用、函数声明、括号表达式、属性访问 <code>if / for / while / switch / catch</code> 等语句中，<code>()</code> 和 <code>[]</code> 内紧贴括号部分不允许有空格。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line"></div><div class="line">callFunc(param1, param2, param3);</div><div class="line"></div><div class="line">save(this.list[this.indexes[i]]);</div><div class="line"></div><div class="line">needIncream &amp;&amp; (variable += increament);</div><div class="line"></div><div class="line">if (num &gt; list.length) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">while (len--) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// bad</div><div class="line"></div><div class="line">callFunc( param1, param2, param3 );</div><div class="line"></div><div class="line">save( this.list[ this.indexes[ i ] ] );</div><div class="line"></div><div class="line">needIncreament &amp;&amp; ( variable += increament );</div><div class="line"></div><div class="line">if ( num &gt; list.length ) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">while ( len-- ) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[强制] 单行声明的数组与对象，如果包含元素，<code>{}</code> 和 <code>[]</code> 内紧贴括号部分不允许包含空格。<br>解释<br>声明包含元素的数组与对象，只有当内部元素的形式较为简单时，才允许写在一行。元素复杂的情况，还是应该换行书写。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">var arr1 = [];</div><div class="line">var arr2 = [1, 2, 3];</div><div class="line">var obj1 = &#123;&#125;;</div><div class="line">var obj2 = &#123;name: &apos;obj&apos;&#125;;</div><div class="line">var obj3 = &#123;</div><div class="line">    name: &apos;obj&apos;,</div><div class="line">    age: 20,</div><div class="line">    sex: 1</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// bad</div><div class="line">var arr1 = [ ];</div><div class="line">var arr2 = [ 1, 2, 3 ];</div><div class="line">var obj1 = &#123; &#125;;</div><div class="line">var obj2 = &#123; name: &apos;obj&apos; &#125;;</div><div class="line">var obj3 = &#123;name: &apos;obj&apos;, age: 20, sex: 1&#125;;</div></pre></td></tr></table></figure>
<p>[强制] 行尾不得有多余的空格。</p>
<h2 id="2-2-3-换行"><a href="#2-2-3-换行" class="headerlink" title="2.2.3. 换行"></a>2.2.3. 换行</h2><p>[强制] 每个独立语句结束后必须换行。<br>[强制] 每行不得超过 120 个字符。<br>解释<br>超长的不可分割的代码允许例外，比如复杂的正则表达式。长字符串不在例外之列。<br>[强制] 运算符处换行时，运算符必须在新行的行首。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">if (user.isAuthenticated()</div><div class="line">    &amp;&amp; user.isInRole(&apos;admin&apos;)</div><div class="line">    &amp;&amp; user.hasAuthority(&apos;add-admin&apos;)</div><div class="line">    || user.hasAuthority(&apos;delete-admin&apos;)</div><div class="line">) &#123;</div><div class="line">    // Code</div><div class="line">&#125;</div><div class="line"></div><div class="line">var result = number1 + number2 + number3</div><div class="line">    + number4 + number5;</div><div class="line"></div><div class="line"></div><div class="line">// bad</div><div class="line">if (user.isAuthenticated() &amp;&amp;</div><div class="line">    user.isInRole(&apos;admin&apos;) &amp;&amp;</div><div class="line">    user.hasAuthority(&apos;add-admin&apos;) ||</div><div class="line">    user.hasAuthority(&apos;delete-admin&apos;)) &#123;</div><div class="line">    // Code</div><div class="line">&#125;</div><div class="line"></div><div class="line">var result = number1 + number2 + number3 +</div><div class="line">    number4 + number5;</div></pre></td></tr></table></figure>
<p>[强制] 在函数声明、函数表达式、函数调用、对象创建、数组创建、for语句等场景中，不允许在 , 或 ; 前换行。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">var obj = &#123;</div><div class="line">    a: 1,</div><div class="line">    b: 2,</div><div class="line">    c: 3</div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo(</div><div class="line">    aVeryVeryLongArgument,</div><div class="line">    anotherVeryLongArgument,</div><div class="line">    callback</div><div class="line">);</div><div class="line"></div><div class="line"></div><div class="line">// bad</div><div class="line">var obj = &#123;</div><div class="line">    a: 1</div><div class="line">    , b: 2</div><div class="line">    , c: 3</div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo(</div><div class="line">    aVeryVeryLongArgument</div><div class="line">    , anotherVeryLongArgument</div><div class="line">    , callback</div><div class="line">);</div></pre></td></tr></table></figure>
<p>[建议] 不同行为或逻辑的语句集，使用空行隔开，更易阅读。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// 仅为按逻辑换行的示例，不代表setStyle的最优实现</div><div class="line">function setStyle(element, property, value) &#123;</div><div class="line">    if (element == null) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    element.style[property] = value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[建议] 在语句的行长度超过 120 时，根据逻辑条件合理缩进。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">// 较复杂的逻辑条件组合，将每个条件独立一行，逻辑运算符放置在行首进行分隔，或将部分逻辑按逻辑组合进行分隔。</div><div class="line">// 建议最终将右括号 ) 与左大括号 &#123; 放在独立一行，保证与 if 内语句块能容易视觉辨识。</div><div class="line">if (user.isAuthenticated()</div><div class="line">    &amp;&amp; user.isInRole(&apos;admin&apos;)</div><div class="line">    &amp;&amp; user.hasAuthority(&apos;add-admin&apos;)</div><div class="line">    || user.hasAuthority(&apos;delete-admin&apos;)</div><div class="line">) &#123;</div><div class="line">    // Code</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 按一定长度截断字符串，并使用 + 运算符进行连接。</div><div class="line">// 分隔字符串尽量按语义进行，如不要在一个完整的名词中间断开。</div><div class="line">// 特别的，对于HTML片段的拼接，通过缩进，保持和HTML相同的结构。</div><div class="line">var html = &apos;&apos; // 此处用一个空字符串，以便整个HTML片段都在新行严格对齐</div><div class="line">    + &apos;&lt;article&gt;&apos;</div><div class="line">    +     &apos;&lt;h1&gt;Title here&lt;/h1&gt;&apos;</div><div class="line">    +     &apos;&lt;p&gt;This is a paragraph&lt;/p&gt;&apos;</div><div class="line">    +     &apos;&lt;footer&gt;Complete&lt;/footer&gt;&apos;</div><div class="line">    + &apos;&lt;/article&gt;&apos;;</div><div class="line"></div><div class="line">// 也可使用数组来进行拼接，相对 + 更容易调整缩进。</div><div class="line">var html = [</div><div class="line">    &apos;&lt;article&gt;&apos;,</div><div class="line">        &apos;&lt;h1&gt;Title here&lt;/h1&gt;&apos;,</div><div class="line">        &apos;&lt;p&gt;This is a paragraph&lt;/p&gt;&apos;,</div><div class="line">        &apos;&lt;footer&gt;Complete&lt;/footer&gt;&apos;,</div><div class="line">    &apos;&lt;/article&gt;&apos;</div><div class="line">];</div><div class="line">html = html.join(&apos;&apos;);</div><div class="line"></div><div class="line">// 当参数过多时，将每个参数独立写在一行上，并将结束的右括号 ) 独立一行。</div><div class="line">// 所有参数必须增加一个缩进。</div><div class="line">foo(</div><div class="line">    aVeryVeryLongArgument,</div><div class="line">    anotherVeryLongArgument,</div><div class="line">    callback</div><div class="line">);</div><div class="line"></div><div class="line">// 也可以按逻辑对参数进行组合。</div><div class="line">// 最经典的是baidu.format函数，调用时将参数分为“模板”和“数据”两块</div><div class="line">baidu.format(</div><div class="line">    dateFormatTemplate,</div><div class="line">    year, month, date, hour, minute, second</div><div class="line">);</div><div class="line"></div><div class="line">// 当函数调用时，如果有一个或以上参数跨越多行，应当每一个参数独立一行。</div><div class="line">// 这通常出现在匿名函数或者对象初始化等作为参数时，如setTimeout函数等。</div><div class="line">setTimeout(</div><div class="line">    function () &#123;</div><div class="line">        alert(&apos;hello&apos;);</div><div class="line">    &#125;,</div><div class="line">    200</div><div class="line">);</div><div class="line"></div><div class="line">order.data.read(</div><div class="line">    &apos;id=&apos; + me.model.id,</div><div class="line">    function (data) &#123;</div><div class="line">        me.attchToModel(data.result);</div><div class="line">        callback();</div><div class="line">    &#125;,</div><div class="line">    300</div><div class="line">);</div><div class="line"></div><div class="line">// 链式调用较长时采用缩进进行调整。</div><div class="line">$(&apos;#items&apos;)</div><div class="line">    .find(&apos;.selected&apos;)</div><div class="line">    .highlight()</div><div class="line">    .end();</div><div class="line"></div><div class="line">// 三元运算符由3部分组成，因此其换行应当根据每个部分的长度不同，形成不同的情况。</div><div class="line">var result = thisIsAVeryVeryLongCondition</div><div class="line">    ? resultA : resultB;</div><div class="line"></div><div class="line">var result = condition</div><div class="line">    ? thisIsAVeryVeryLongResult</div><div class="line">    : resultB;</div><div class="line"></div><div class="line">// 数组和对象初始化的混用，严格按照每个对象的 &#123; 和结束 &#125; 在独立一行的风格书写。</div><div class="line">var array = [</div><div class="line">    &#123;</div><div class="line">        // ...</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        // ...</div><div class="line">    &#125;</div><div class="line">];</div></pre></td></tr></table></figure>
<p>[建议] 对于 <code>if...else...</code> 、 <code>try...catch...finally</code> 等语句，推荐使用在 } 号后添加一个换行 的风格，使代码层次结构更清晰，阅读性更好。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">if (condition) &#123;</div><div class="line">    // some statements;</div><div class="line">&#125;</div><div class="line">else &#123;</div><div class="line">    // some statements;</div><div class="line">&#125;</div><div class="line"></div><div class="line">try &#123;</div><div class="line">    // some statements;</div><div class="line">&#125;</div><div class="line">catch (ex) &#123;</div><div class="line">    // some statements;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-2-4-语句"><a href="#2-2-4-语句" class="headerlink" title="2.2.4. 语句"></a>2.2.4. 语句</h2><p>[强制] 不得省略语句结束的分号。<br>[强制] 在 <code>if / else / for / do / while</code> 语句中，即使只有一行，也不得省略块 {…}。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">if (condition) &#123;</div><div class="line">    callFunc();</div><div class="line">&#125;</div><div class="line"></div><div class="line">// bad</div><div class="line">if (condition) callFunc();</div><div class="line">if (condition)</div><div class="line">    callFunc();</div><div class="line">·[强制] [RULE023] 函数定义结束不允许添加分号。</div><div class="line">示例</div><div class="line">// good</div><div class="line">function funcName() &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// bad</div><div class="line">function funcName() &#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// 如果是函数表达式，分号是不允许省略的。</div><div class="line">var funcName = function () &#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>[强制] IIFE立即执行函数表达式 必须在函数表达式外添加 (，非 IIFE 不得在函数表达式外添加 ( 。<br>解释<br>额外的 ( 能够让代码在阅读的一开始就能判断函数是否立即被调用，进而明白接下来代码的用途。而不是一直拖到底部才恍然大悟。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">var task = (function () &#123;</div><div class="line">   // Code</div><div class="line">   return result;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line">var func = function () &#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">// bad</div><div class="line">var task = function () &#123;</div><div class="line">    // Code</div><div class="line">    return result;</div><div class="line">&#125;();</div><div class="line"></div><div class="line">var func = (function () &#123;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="2-3-命名"><a href="#2-3-命名" class="headerlink" title="2.3. 命名"></a>2.3. 命名</h2><p>[强制] 变量 使用 Camel命名法 。<br>示例<br><figure class="highlight plain"><figcaption><span>loadingModules = &#123;&#125;;```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[强制] 常量 使用 全部字母大写，单词间下划线分隔 的命名方式。</div><div class="line">示例</div><div class="line">```var HTML_ENTITY = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<p>[强制] 函数 使用 Camel命名法 。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">function stringFormat(source) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[强制] 函数的 参数 使用 Camel命名法 。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">function hear(theBells) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[强制] 类 使用 <a href="http://blog.csdn.net/f_zyj/article/details/51510085" target="_blank" rel="external">Pascal命名法</a> 。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">function TextNode(options) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[强制] 类的 方法 / 属性 使用 Camel命名法 。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function TextNode(value, engine) &#123;</div><div class="line">    this.value = value;</div><div class="line">    this.engine = engine;</div><div class="line">&#125;</div><div class="line"></div><div class="line">TextNode.prototype.clone = function () &#123;</div><div class="line">    return this;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>[强制] <a href="http://blog.csdn.net/langzi7758521/article/details/52063989" target="_blank" rel="external">枚举变量</a> 使用 Pascal命名法 ，枚举的属性 使用 全部字母大写，单词间下划线分隔 的命名方式。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var TargetState = &#123;</div><div class="line">    READING: 1,</div><div class="line">    READED: 2,</div><div class="line">    APPLIED: 3,</div><div class="line">    READY: 4</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>[强制] 命名空间 使用 Camel命名法 。<br>示例<br><figure class="highlight plain"><figcaption><span>= &#123;&#125;;```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[强制] 由多个单词组成的缩写词，在命名中，根据当前命名法和出现的位置，所有字母的大小写与首字母的大小写保持一致。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>function XMLParser() {<br>}</p>
<p>function insertHTML(element, html) {<br>}</p>
<p>var httpRequest = new HTTPRequest();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[强制] 类名 使用 名词 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>function Engine(options) {<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 函数名 使用 动宾短语 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>function getStyle(element) {<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] boolean 类型的变量使用 is 或 has 开头。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var isReady = false;<br>var hasMoreCommands = false;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] Promise对象[释疑](http://blog.csdn.net/github_26672553/article/details/53762054) 用 动宾短语的进行时 表达。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var loadingData = ajax.get(‘url’);<br>loadingData.then(callback);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">2.4. 注释</div><div class="line">---</div><div class="line">2.4.1. 单行注释</div><div class="line">---</div><div class="line">[强制] 必须独占一行。// 后跟一个空格，缩进与下一行被注释说明的代码一致。</div><div class="line">2.4.2. 多行注释</div><div class="line">---</div><div class="line">[建议] 避免使用 `/*...*/` 这样的多行注释。有多行注释内容时，使用多个单行注释。</div><div class="line">2.4.3. 文档化注释</div><div class="line">---</div><div class="line">[强制] 为了便于代码阅读和自文档化，以下内容必须包含以 `/**...*/` 形式的块注释中。</div><div class="line">解释</div><div class="line"></div><div class="line">1. 文件</div><div class="line">2. namespace</div><div class="line">3. 类</div><div class="line">4. 函数或方法</div><div class="line">5. 类属性</div><div class="line">6. 事件</div><div class="line">7. 全局变量</div><div class="line">8. 常量</div><div class="line">9. AMD 模块</div><div class="line">[强制] 文档注释前必须空一行。</div><div class="line">[建议] 自文档化的文档说明 `what`，而不是 `how`。</div><div class="line"></div><div class="line">2.4.4. 类型定义</div><div class="line">---</div><div class="line">[强制] 类型定义都是以 `&#123; 开始, 以 &#125;` 结束。</div><div class="line">解释</div><div class="line">常用类型如：`&#123;string&#125;, &#123;number&#125;, &#123;boolean&#125;, &#123;Object&#125;, &#123;Function&#125;, &#123;RegExp&#125;, &#123;Array&#125;, &#123;Date&#125;`。</div><div class="line">类型不仅局限于内置的类型，也可以是自定义的类型。比如定义了一个类 Developer，就可以使用它来定义一个参数和返回值的类型。</div><div class="line">[强制] 对于基本类型 `&#123;string&#125;, &#123;number&#125;, &#123;boolean&#125;`，首字母必须小写。</div><div class="line"></div><div class="line">类型定义  |  语法示例  |  解释</div><div class="line">------  |  ------  |  ------</div><div class="line">String  |  &#123;string&#125;  |  –</div><div class="line">Number  |  &#123;number&#125;	  |  –</div><div class="line">Boolean  |  &#123;boolean&#125;  |  –</div><div class="line">Object  |  &#123;Object&#125;  |  –</div><div class="line">Function  |  &#123;Function&#125;  |  –</div><div class="line">RegExp  |  	&#123;RegExp&#125;  |  –</div><div class="line">Array  |  &#123;Array&#125;  |  –</div><div class="line">Date  |  &#123;Date&#125;  |  –</div><div class="line">单一类型集合  |  &#123;Array.&lt;string&gt;&#125;  |  string 类型的数组</div><div class="line">多类型  |  &#123;(number｜boolean)&#125;  |  可能是 number 类型, 也可能是 boolean 类型</div><div class="line">允许为null  |  &#123;?number&#125;  |  可能是 number, 也可能是 null</div><div class="line">不允许为null  |  &#123;!Object&#125;  |  Object 类型, 但不是 null</div><div class="line">Function类型  |  &#123;function(number, boolean)&#125;  |  函数, 形参类型</div><div class="line">Function带返回值  |  &#123;function(number, boolean):string&#125;  |  函数, 形参, 返回值类型</div><div class="line">参数可选  |  @param &#123;string=&#125; name  |  可选参数, =为类型后缀</div><div class="line">可变参数  |  @param &#123;...number&#125; args	  |  变长参数, ...为类型前缀</div><div class="line">任意类型  | ` &#123;*&#125;`  |  任意类型</div><div class="line">可选任意类型  |  `@param &#123;*=&#125; name`  |  可选参数，类型不限</div><div class="line">可变任意类型  |  `@param &#123;...*&#125; args`  |  变长参数，类型不限</div><div class="line"></div><div class="line">2.4.5. 文件注释</div><div class="line">---</div><div class="line">[强制] 文件顶部必须包含文件注释，用 `@file` 标识文件说明。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>/**</p>
<ul>
<li>@file Describe the file<br>*/<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[建议] 文件注释中可以用 `@author` 标识开发者信息。</div><div class="line">解释</div><div class="line">开发者信息能够体现开发人员对文件的贡献，并且能够让遇到问题或希望了解相关信息的人找到维护人。通常情况文件在被创建时标识的是创建者。</div><div class="line">随着项目的进展，越来越多的人加入，参与这个文件的开发，新的作者应该被加入 `@author` 标识。</div><div class="line">`@author` 标识具有多人时，原则是按照 责任 进行排序。通常的说就是如果有问题，就是找第一个人应该比找第二个人有效。</div><div class="line">比如文件的创建者由于各种原因，模块移交给了其他人或其他团队，后来因为新增需求，其他人在新增代码时，添加 `@author` 标识应该把自己的名字添加在创建人的前面。</div><div class="line">`@author` 中的名字不允许被删除。任何劳动成果都应该被尊重。</div><div class="line">业务项目中，一个文件可能被多人频繁修改，并且每个人的维护时间都可能不会很长，不建议为文件增加 `@author` 标识。通过版本控制系统追踪变更，按业务逻辑单元确定模块的维护责任人，通过文档与wiki跟踪和查询，是更好的责任管理方式。</div><div class="line">对于业务逻辑无关的技术型基础项目，特别是开源的公共项目，应使用 `@author` 标识。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>@file Describe the file</li>
<li>@author author-name(mail-name@domain.com)</li>
<li>author-name2(mail-name2@domain.com)<br>*/<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">2.4.6. 命名空间注释</div><div class="line">---</div><div class="line">[建议] 命名空间使用 `@namespace` 标识。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>@namespace<br>*/<br>var util = {};<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">2.4.7. 类注释</div><div class="line">---</div><div class="line">[建议] 使用 `@class` 标记类或构造函数。</div><div class="line">解释</div><div class="line">对于使用对象 `constructor` 属性来定义的构造函数，可以使用 `@constructor` 来标记。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>描述<br>*</li>
<li>@class<br>*/<br>function Developer() {<br> // constructor body<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 使用 `@extends` 标记类的继承信息。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>描述<br>*</li>
<li>@class</li>
<li>@extends Developer<br>*/<br>function Fronteer() {<br> Developer.call(this);<br> // constructor body<br>}<br>util.inherits(Fronteer, Developer);<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 使用包装方式扩展类成员时， 必须通过 `@lends` 进行重新指向。</div><div class="line">解释</div><div class="line">没有 `@lends` 标记将无法为该类生成包含扩展类成员的文档。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>类描述<br>*</li>
<li>@class</li>
<li>@extends Developer<br>*/<br>function Fronteer() {<br> Developer.call(this);<br> // constructor body<br>}</li>
</ul>
<p>util.extend(<br>    Fronteer.prototype,<br>    /<em>* @lends Fronteer.prototype </em>/{<br>        _getLevel: function () {<br>            // TODO<br>        }<br>    }<br>);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 类的属性或方法等成员信息使用 `@public / @protected / @private` 中的任意一个，指明可访问性。</div><div class="line">解释</div><div class="line">生成的文档中将有可访问性的标记，避免用户直接使用非 public 的属性或方法。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>/**</p>
<ul>
<li>类描述<br>*</li>
<li>@class</li>
<li><p>@extends Developer<br>*/<br>var Fronteer = function () {<br> Developer.call(this);</p>
<p> /**</p>
<ul>
<li>属性描述<br>*</li>
<li>@type {string}</li>
<li><p>@private<br>*/<br>this._level = ‘T12’;</p>
<p>// constructor body<br>};<br>util.inherits(Fronteer, Developer);</p>
</li>
</ul>
</li>
</ul>
<p>/**</p>
<ul>
<li>方法描述<br>*</li>
<li>@private</li>
<li>@return {string} 返回值描述<br>*/<br>Fronteer.prototype._getLevel = function () {<br>};<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">2.4.8. 函数/方法注释</div><div class="line">---</div><div class="line">[强制] 函数/方法注释必须包含函数说明，有参数和返回值时必须使用注释标识。</div><div class="line">[强制] 参数和返回值注释必须包含类型信息和说明。</div><div class="line">[建议] 当函数是内部函数，外部不可访问时，可以使用 `@inner` 标识。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>函数描述<br>*</li>
<li>@param {string} p1 参数1的说明</li>
<li>@param {string} p2 参数2的说明，比较长</li>
<li>那就换行了.</li>
<li>@param {number=} p3 参数3的说明（可选）</li>
<li>@return {Object} 返回值描述<br>*/<br>function foo(p1, p2, p3) {<br> var p3 = p3 || 10;<br> return {<pre><code>p1: p1,
p2: p2,
p3: p3
</code></pre> };<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[强制] 对 Object 中各项的描述， 必须使用 `@param` 标识。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>函数描述<br>*</li>
<li>@param {Object} option 参数描述</li>
<li>@param {string} option.url option项描述</li>
<li>@param {string=} option.method option项描述，可选参数<br>*/<br>function foo(option) {<br> // TODO<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[建议] 重写父类方法时， 应当添加 `@override` 标识。如果重写的形参个数、类型、顺序和返回值类型均未发生变化，可省略 `@param 、@return` ，仅用 `@override` 标识，否则仍应作完整注释。</div><div class="line">解释</div><div class="line">简而言之，当子类重写的方法能直接套用父类的方法注释时可省略对参数与返回值的注释。</div><div class="line">2.4.9. 事件注释</div><div class="line">---</div><div class="line">[强制] 必须使用 `@event` 标识事件，事件参数的标识与方法描述的参数标识相同。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>值变更时触发<br>*</li>
<li>@event</li>
<li>@param {Object} e e描述</li>
<li>@param {string} e.before before描述</li>
<li>@param {string} e.after after描述<br>*/<br>onchange: function (e) {<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[强制] 在会广播事件的函数前使用 `@fires` 标识广播的事件，在广播事件代码前使用 `@event` 标识事件。</div><div class="line">[建议] 对于事件对象的注释，使用 `@param` 标识，生成文档时可读性更好。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>点击处理<br>*</li>
<li>@fires Select#change</li>
<li>@private<br><em>/<br>Select.prototype.clickHandler = function () {<br> /*</em><ul>
<li>值变更时触发<br>*</li>
<li>@event Select#change</li>
<li>@param {Object} e e描述</li>
<li>@param {string} e.before before描述</li>
<li>@param {string} e.after after描述<br>*/<br>this.fire(<br> ‘change’,<br> {<pre><code>before: &apos;foo&apos;,
after: &apos;bar&apos;
</code></pre> }<br>);<br>};<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">2.4.10. 常量注释</div><div class="line">---</div><div class="line">[强制] 常量必须使用 `@const` 标记，并包含说明和类型信息。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>/**</p>
<ul>
<li>常量说明<br>*</li>
<li>@const</li>
<li>@type {string}<br>*/<br>var REQUEST_URL = ‘myurl.do’;<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">2.4.11. 复杂类型注释</div><div class="line">---</div><div class="line">[建议] 对于类型未定义的复杂结构的注释，可以使用 `@typedef ` 标识来定义。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>// <code>namespaceA~</code> 可以换成其它 namepaths 前缀，目的是为了生成文档中能显示 <code>@typedef</code> 定义的类型和链接。<br>/**</p>
<ul>
<li>服务器<br>*</li>
<li>@typedef {Object} namespaceA~Server</li>
<li>@property {string} host 主机</li>
<li>@property {number} port 端口<br>*/</li>
</ul>
<p>/**</p>
<ul>
<li>服务器列表<br>*</li>
<li>@type {Array.<namespacea~server>}<br>*/<br>var servers = [<br> {<pre><code>host: &apos;1.2.3.4&apos;,
port: 8080
</code></pre> },<br> {<pre><code>host: &apos;1.2.3.5&apos;,
port: 8081
</code></pre> }<br>];<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">2.4.12. AMD 模块注释</div><div class="line">---</div><div class="line">[强制] AMD 模块使用 `@module` 或 `@exports` 标识。</div><div class="line">解释</div><div class="line">`@exports` 与 `@module` 都可以用来标识模块，区别在于 `@module` 可以省略模块名称。而只使用 `@exports` 时在 namepaths 中可以省略 module: 前缀。</div><div class="line">示例</div></pre></td></tr></table></figure>
</namespacea~server></li>
</ul>
<p>define(<br>    function (require) {</p>
<pre><code>    /**
     * foo description
     *
     * @exports Foo
     */
    var foo = {
        // TODO
    };

    /**
     * baz description
     *
     * @return {boolean} return description
     */
    foo.baz = function () {
        // TODO
    };

    return foo;

}
</code></pre><p>);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">也可以在 exports 变量前使用 `@module` 标识：</div></pre></td></tr></table></figure></p>
<p>define(<br>    function (require) {</p>
<pre><code>    /**
     * module description.
     *
     * @module foo
     */
    var exports = {};


    /**
     * bar description
     *
     */
    exports.bar = function () {
        // TODO
    };

    return exports;
}
</code></pre><p>);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">如果直接使用 factory 的 exports 参数，还可以：</div></pre></td></tr></table></figure></p>
<p>/**</p>
<ul>
<li>module description.<br>*</li>
<li><p>@module<br>*/<br>define(<br> function (require, exports) {</p>
<pre><code>/**
 * bar description
 *
 */
exports.bar = function () {
    // TODO
};
return exports;
</code></pre><p> }<br>);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 对于已使用 `@module` 标识为 AMD模块 的引用，在 namepaths 中必须增加 module: 作前缀。</div><div class="line">解释</div><div class="line">namepaths 没有 module: 前缀时，生成的文档中将无法正确生成链接。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/**</p>
<ul>
<li>点击处理<br>*</li>
<li>@fires module:Select#change</li>
<li>@private<br><em>/<br>Select.prototype.clickHandler = function () {<br> /*</em><ul>
<li>值变更时触发<br>*</li>
<li>@event module:Select#change</li>
<li>@param {Object} e e描述</li>
<li>@param {string} e.before before描述</li>
<li>@param {string} e.after after描述<br>*/<br>this.fire(<br> ‘change’,<br> {<pre><code>before: &apos;foo&apos;,
after: &apos;bar&apos;
</code></pre> }<br>);<br>};<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 对于类定义的模块，可以使用 `@alias` 标识构建函数。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>/**</p>
<ul>
<li>A module representing a jacket.</li>
<li><p>@module jacket<br>*/<br>define(<br> function () {</p>
<pre><code>/**
 * @class
 * @alias module:jacket
 */
var Jacket = function () {
};

return Jacket;
</code></pre><p> }<br>);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 多模块定义时，可以使用 `@exports` 标识各个模块。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>// one module<br>define(‘html/utils’,<br>    /**</p>
<pre><code> * Utility functions to ease working with DOM elements.
 * @exports html/utils
 */
function () {
    var exports = {
    };

    return exports;
}
</code></pre><p>);</p>
<p>// another module<br>define(‘tag’,<br>    /<em>* @exports tag </em>/<br>    function () {<br>        var exports = {<br>        };</p>
<pre><code>    return exports;
}
</code></pre><p>);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[建议] 对于 exports 为 Object 的模块，可以使用 `@namespace` 标识。</div><div class="line">解释</div><div class="line">使用 `@namespace` 而不是 `@module` 或 `@exports` 时，对模块的引用可以省略 module: 前缀。</div><div class="line">[建议] 对于 exports 为类名的模块，使用 `@class` 和 `@exports` 标识。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// 只使用 @class Bar 时，类方法和属性都必须增加 @name Bar#methodName 来标识，与 @exports 配合可以免除这一麻烦，并且在引用时可以省去 module: 前缀。<br>// 另外需要注意类名需要使用 var 定义的方式。</p>
<p>/**</p>
<ul>
<li>Bar description<br>*</li>
<li>@see foo</li>
<li>@exports  Bar</li>
<li>@class<br>*/<br>var Bar = function () {<br> // TODO<br>};</li>
</ul>
<p>/**</p>
<ul>
<li>baz description<br>*</li>
<li>@return {(string|Array)} return description<br>*/<br>Bar.prototype.baz = function () {<br> // TODO<br>};<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2.4.13. 细节注释</div><div class="line">---</div><div class="line">对于内部实现、不容易理解的逻辑说明、摘要信息等，我们可能需要编写细节注释。</div><div class="line">[建议] 细节注释遵循单行注释的格式。说明必须换行时，每行是一个单行注释的起始。</div><div class="line">示例</div></pre></td></tr></table></figure>
</li>
</ul>
<p>function foo(p1, p2) {<br>    // 这里对具体内部逻辑进行说明<br>    // 说明太长需要换行<br>    for (…) {<br>        ….<br>    }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[强制] 有时我们会使用一些特殊标记进行说明。特殊标记必须使用单行注释的形式。下面列举了一些常用标记：</div><div class="line">解释</div><div class="line">&gt; TODO: 有功能待实现。此时需要对将要实现的功能进行简单说明。</div><div class="line">&gt; FIXME: 该处代码运行没问题，但可能由于时间赶或者其他原因，需要修正。此时需要对如何修正进行简单说明。</div><div class="line">&gt; HACK: 为修正某些问题而写的不太好或者使用了某些诡异手段的代码。此时需要对思路或诡异手段进行描述。</div><div class="line">&gt; XXX: 该处存在陷阱。此时需要对陷阱进行描述。</div><div class="line">3. 语言特性</div><div class="line">---</div><div class="line">3.1. 变量</div><div class="line">---</div><div class="line">[强制] 变量在使用前必须通过 var 定义。</div><div class="line">解释</div><div class="line">不通过 var 定义变量将导致变量污染全局环境。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>var name = ‘MyName’;</p>
<p>// bad<br>name = ‘MyName’;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 每个 var 只能声明一个变量。</div><div class="line">解释</div><div class="line">一个 var 声明多个变量，容易导致较长的行长度，并且在修改时容易造成逗号和分号的混淆。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>var hangModules = [];<br>var missModules = [];<br>var visited = {};</p>
<p>// bad<br>var hangModules = [],<br>    missModules = [],<br>    visited = {};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 变量必须 即用即声明 ，不得在函数或其它形式的代码块起始位置统一声明所有变量。</div><div class="line">解释</div><div class="line">变量声明与使用的距离越远，出现的跨度越大，代码的阅读与维护成本越高。虽然JavaScript的变量是函数作用域，还是应该根据编程中的意图，缩小变量出现的距离空间。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>function kv2List(source) {<br>    var list = [];</p>
<pre><code>for (var key in source) {
    if (source.hasOwnProperty(key)) {
        var item = {
            k: key,
            v: source[key]
        };
        list.push(item);
    }
}

return list;
</code></pre><p>}</p>
<p>// bad<br>function kv2List(source) {<br>    var list = [];<br>    var key;<br>    var item;</p>
<pre><code>for (key in source) {
    if (source.hasOwnProperty(key)) {
        item = {
            k: key,
            v: source[key]
        };
        list.push(item);
    }
}

return list;
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">3.2. 条件</div><div class="line">---</div><div class="line">[强制] 在 `Equality Expression` 中使用类型严格的 `===` 。仅当判断 `null` 或 `undefined` 时，允许使用 `== null` 。</div><div class="line">解释</div><div class="line">使用 `===` 可以避免等于判断中隐式的类型转换。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>if (age === 30) {<br>    // ……<br>}</p>
<p>// bad<br>if (age == 30) {<br>    // ……<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 尽可能使用简洁的表达式。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// 字符串为空</p>
<p>// good<br>if (!name) {<br>    // ……<br>}</p>
<p>// bad<br>if (name === ‘’) {<br>    // ……<br>}<br>// 字符串非空</p>
<p>// good<br>if (name) {<br>    // ……<br>}</p>
<p>// bad<br>if (name !== ‘’) {<br>    // ……<br>}<br>// 数组非空</p>
<p>// good<br>if (collection.length) {<br>    // ……<br>}</p>
<p>// bad<br>if (collection.length &gt; 0) {<br>    // ……<br>}<br>// 布尔不成立</p>
<p>// good<br>if (!notTrue) {<br>    // ……<br>}</p>
<p>// bad<br>if (notTrue === false) {<br>    // ……<br>}<br>// null 或 undefined</p>
<p>// good<br>if (noValue == null) {<br>  // ……<br>}</p>
<p>// bad<br>if (noValue === null || typeof noValue === ‘undefined’) {<br>  // ……<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[建议] 按执行频率排列分支的顺序。</div><div class="line">解释</div><div class="line">按执行频率排列分支的顺序好处是：</div><div class="line">阅读的人容易找到最常见的情况，增加可读性。</div><div class="line">提高执行效率。</div><div class="line">[建议] 对于相同变量或表达式的多值条件，用 switch 代替 if 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>switch (typeof variable) {<br>    case ‘object’:<br>        // ……<br>        break;<br>    case ‘number’:<br>    case ‘boolean’:<br>    case ‘string’:<br>        // ……<br>        break;<br>}</p>
<p>// bad<br>var type = typeof variable;<br>if (type === ‘object’) {<br>    // ……<br>}<br>else if (type === ‘number’ || type === ‘boolean’ || type === ‘string’) {<br>    // ……<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 如果函数或全局中的 else 块后没有任何语句，可以删除 else 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>function getName() {<br>    if (name) {<br>        return name;<br>    }</p>
<pre><code>return &apos;unnamed&apos;;
</code></pre><p>}</p>
<p>// bad<br>function getName() {<br>    if (name) {<br>        return name;<br>    }<br>    else {<br>        return ‘unnamed’;<br>    }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">3.3. 循环</div><div class="line">---</div><div class="line">[建议] 不要在循环体中包含函数表达式，事先将函数提取到循环体外。</div><div class="line">解释</div><div class="line">循环体中的函数表达式，运行过程中会生成循环次数个函数对象。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>function clicker() {<br>    // ……<br>}</p>
<p>for (var i = 0, len = elements.length; i &lt; len; i++) {<br>    var element = elements[i];<br>    addListener(element, ‘click’, clicker);<br>}</p>
<p>// bad<br>for (var i = 0, len = elements.length; i &lt; len; i++) {<br>    var element = elements[i];<br>    addListener(element, ‘click’, function () {});<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 对循环内多次使用的不变值，在循环外用变量缓存。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>var width = wrap.offsetWidth + ‘px’;<br>for (var i = 0, len = elements.length; i &lt; len; i++) {<br>    var element = elements[i];<br>    element.style.width = width;<br>    // ……<br>}</p>
<p>// bad<br>for (var i = 0, len = elements.length; i &lt; len; i++) {<br>    var element = elements[i];<br>    element.style.width = wrap.offsetWidth + ‘px’;<br>    // ……<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[建议] 对有序集合进行遍历时，缓存 length 。</div><div class="line">解释</div><div class="line">虽然现代浏览器都对数组长度进行了缓存，但对于一些宿主对象和老旧浏览器的数组对象，在每次 length 访问时会动态计算元素个数，此时缓存 length 能有效提高程序性能。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>for (var i = 0, len = elements.length; i &lt; len; i++) {<br>    var element = elements[i];<br>    // ……<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[建议] 对有序集合进行顺序无关的遍历时，使用逆序遍历。</div><div class="line">解释</div><div class="line">逆序遍历可以节省变量，代码比较优化。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var len = elements.length;<br>while (len–) {<br>    var element = elements[len];<br>    // ……<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">3.4. 类型</div><div class="line">---</div><div class="line">3.4.1. 类型检测</div><div class="line">---</div><div class="line">[建议] 类型检测优先使用 `typeof` 。对象类型检测使用 `instanceof` 。`null` 或 `undefined` 的检测使用 `== null` 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// string<br>typeof variable === ‘string’</p>
<p>// number<br>typeof variable === ‘number’</p>
<p>// boolean<br>typeof variable === ‘boolean’</p>
<p>// Function<br>typeof variable === ‘function’</p>
<p>// Object<br>typeof variable === ‘object’</p>
<p>// RegExp<br>variable instanceof RegExp</p>
<p>// Array<br>variable instanceof Array</p>
<p>// null<br>variable === null</p>
<p>// null or undefined<br>variable == null</p>
<p>// undefined<br>typeof variable === ‘undefined’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">3.4.2. 类型转换</div><div class="line">---</div><div class="line">[建议] 转换成 `string` 时，使用 `+ &apos;&apos;` 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>num + ‘’;</p>
<p>// bad<br>new String(num);<br>num.toString();<br>String(num);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 转换成 `number` 时，通常使用 `+` 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>+str;</p>
<p>// bad<br>Number(str);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] string 转换成 number ，要转换的字符串结尾包含非数字并期望忽略时，使用 parseInt。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var width = ‘200px’;<br>parseInt(width, 10);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[强制] 使用 parseInt 时，必须指定进制。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>parseInt(str, 10);</p>
<p>// bad<br>parseInt(str);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] 转换成 `boolean` 时，使用 `!!` 。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var num = 3.14;<br>!!num;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] `number` 去除小数点，使用 `Math.floor / Math.round / Math.ceil` ，不使用 `parseInt`。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>var num = 3.14;<br>Math.ceil(num);</p>
<p>// bad<br>var num = 3.14;<br>parseInt(num, 10);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">3.5. 字符串</div><div class="line">---</div><div class="line">[强制] 字符串开头和结束使用单引号 `&apos;` 。</div><div class="line">解释</div><div class="line">输入单引号不需要按住 shift，方便输入。</div><div class="line">实际使用中，字符串经常用来拼接 HTML。为方便 HTML 中包含双引号而不需要转义写法。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var str = ‘我是一个字符串’;<br>var html = ‘<div class="cls">拼接HTML可以省去双引号转义</div>‘;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[建议] 使用 数组 或 `+` 拼接字符串。</div><div class="line">解释</div><div class="line">使用 `+` 拼接字符串，如果拼接的全部是 StringLiteral，压缩工具可以对其进行自动合并的优化。所以，静态字符串建议使用 `+` 拼接。</div><div class="line">在现代浏览器下，使用 `+` 拼接字符串，性能较数组的方式要高。</div><div class="line">如需要兼顾老旧浏览器，应尽量使用数组拼接字符串。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// 使用数组拼接字符串<br>var str = [<br>    // 推荐换行开始并缩进开始第一个字符串, 对齐代码, 方便阅读.<br>    ‘<ul>‘,<br>        ‘<li>第一项</li>‘,<br>        ‘<li>第二项</li>‘,<br>    ‘</ul>‘<br>].join(‘’);</p>
<p>// 使用 + 拼接字符串<br>var str2 = ‘’ // 建议第一个为空字符串, 第二个换行开始并缩进开始, 对齐代码, 方便阅读</p>
<pre><code>+ &apos;&lt;ul&gt;&apos;,
+    &apos;&lt;li&gt;第一项&lt;/li&gt;&apos;,
+    &apos;&lt;li&gt;第二项&lt;/li&gt;&apos;,
+ &apos;&lt;/ul&gt;&apos;;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[建议] 复杂的数据到视图字符串的转换过程，选用一种模板引擎。</div><div class="line">解释</div><div class="line">使用模板引擎有如下好处：</div><div class="line">在开发过程中专注于数据，将视图生成的过程由另外一个层级维护，使程序逻辑结构更清晰。</div><div class="line">优秀的模板引擎，通过模板编译技术和高质量的编译产物，能获得比手工拼接字符串更高的性能。</div><div class="line">&gt; artTemplate: 体积较小，在所有环境下性能高，语法灵活。</div><div class="line">&gt; dot.js: 体积小，在现代浏览器下性能高，语法灵活。</div><div class="line">&gt; etpl: 体积较小，在所有环境下性能高，模板复用性高，语法灵活。</div><div class="line">&gt; handlebars: 体积大，在所有环境下性能高，扩展性高。</div><div class="line">&gt; hogon: 体积小，在现代浏览器下性能高。</div><div class="line">&gt; nunjucks: 体积较大，性能一般，模板复用性高。</div><div class="line">3.6. 对象</div><div class="line">---</div><div class="line">[强制] 使用对象字面量 `&#123;&#125;` 创建新 `Object` 。</div><div class="line">示例</div></pre></td></tr></table></figure>
<p>// good<br>var obj = {};</p>
<p>// bad<br>var obj = new Object();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[强制] 对象创建时，如果一个对象的所有 属性 均可以不添加引号，则所有 属性 不得添加引号。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var info = {<br>    name: ‘someone’,<br>    age: 28<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 对象创建时，如果任何一个 属性 需要添加引号，则所有 属性 必须添加 &apos; 。</div><div class="line">解释</div><div class="line">如果属性不符合 `Identifier` 和 `NumberLiteral` 的形式，就需要以 `StringLiteral` 的形式提供。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>var info = {<br>    ‘name’: ‘someone’,<br>    ‘age’: 28,<br>    ‘more-info’: ‘…’<br>};</p>
<p>// bad<br>var info = {<br>    name: ‘someone’,<br>    age: 28,<br>    ‘more-info’: ‘…’<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[强制] 不允许修改和扩展任何原生对象和宿主对象的原型。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// 以下行为绝对禁止<br>String.prototype.trim = function () {<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[建议] 属性访问时，尽量使用 `.` 。</div><div class="line">解释</div><div class="line">属性名符合 `Identifier` 的要求，就可以通过 `.` 来访问，否则就只能通过 `[expr]` 方式访问。</div><div class="line">通常在 JavaScript 中声明的对象，属性命名是使用 Camel 命名法，用 `.` 来访问更清晰简洁。部分特殊的属性(比如来自后端的JSON)，可能采用不寻常的命名方式，可以通过 `[expr]` 方式访问。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>info.age;<br>info[‘more-info’];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[建议] for in 遍历对象时, 使用 `hasOwnProperty` 过滤掉原型中的属性。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var newInfo = {};<br>for (var key in info) {<br>    if (info.hasOwnProperty(key)) {<br>        newInfo[key] = info[key];<br>    }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">3.7. 数组</div><div class="line">---</div><div class="line">[强制] 使用数组字面量 `[]` 创建新数组，除非想要创建的是指定长度的数组。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>// good<br>var arr = [];</p>
<p>// bad<br>var arr = new Array();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[强制] 遍历数组不使用 `for in`。</div><div class="line">解释</div><div class="line">数组对象可能存在数字以外的属性, 这种情况下 for in 不会得到正确结果.</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var arr = [‘a’, ‘b’, ‘c’];<br>arr.other = ‘other things’; // 这里仅作演示, 实际中应使用Object类型</p>
<p>// 正确的遍历方式<br>for (var i = 0, len = arr.length; i &lt; len; i++) {<br>    console.log(i);<br>}</p>
<p>// 错误的遍历方式<br>for (i in arr) {<br>    console.log(i);<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[建议] 不因为性能的原因自己实现数组排序功能，尽量使用数组的 `sort` 方法。</div><div class="line">解释</div><div class="line">自己实现的常规排序算法，在性能上并不优于数组默认的 `sort` 方法。以下两种场景可以自己实现排序：</div><div class="line">需要稳定的排序算法，达到严格一致的排序结果。</div><div class="line">数据特点鲜明，适合使用桶排。</div><div class="line">[建议] 清空数组使用 `.length = 0` 。</div><div class="line">3.8. 函数</div><div class="line">---</div><div class="line">3.8.1. 函数长度</div><div class="line">---</div><div class="line">[建议] 一个函数的长度控制在 50 行以内。</div><div class="line">解释</div><div class="line">将过多的逻辑单元混在一个大函数中，易导致难以维护。一个清晰易懂的函数应该完成单一的逻辑单元。复杂的操作应进一步抽取，通过函数的调用来体现流程。</div><div class="line">特定算法等不可分割的逻辑允许例外。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>function syncViewStateOnUserAction() {<br>    if (x.checked) {<br>        y.checked = true;<br>        z.value = ‘’;<br>    }<br>    else {<br>        y.checked = false;<br>    }</p>
<pre><code>if (!a.value) {
    warning.innerText = &apos;Please enter it&apos;;
    submitButton.disabled = true;
}
else {
    warning.innerText = &apos;&apos;;
    submitButton.disabled = false;
}
</code></pre><p>}</p>
<p>// 直接阅读该函数会难以明确其主线逻辑，因此下方是一种更合理的表达方式：</p>
<p>function syncViewStateOnUserAction() {<br>    syncXStateToView();<br>    checkAAvailability();<br>}</p>
<p>function syncXStateToView() {<br>    if (x.checked) {<br>        y.checked = true;<br>        z.value = ‘’;<br>    }<br>    else {<br>        y.checked = false;<br>    }<br>}</p>
<p>function checkAAvailability() {<br>    if (!a.value) {<br>        displayWarningForAMissing();<br>    }<br>    else {<br>        clearWarnignForA();<br>    }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">3.8.2. 参数设计</div><div class="line">---</div><div class="line">[建议] 一个函数的参数控制在 6 个以内。</div><div class="line">解释</div><div class="line">除去不定长参数以外，函数具备不同逻辑意义的参数建议控制在 6 个以内，过多参数会导致维护难度增大。</div><div class="line">某些情况下，如使用 `AMD Loader` 的 `require` 加载多个模块时，其 `callback` 可能会存在较多参数，因此对函数参数的个数不做强制限制。</div><div class="line">[建议] 通过 options 参数传递非数据输入型参数。</div><div class="line">解释</div><div class="line">有些函数的参数并不是作为算法的输入，而是对算法的某些分支条件判断之用，此类参数建议通过一个 options 参数传递。</div><div class="line">如下函数：</div></pre></td></tr></table></figure></p>
<p>/**</p>
<ul>
<li>移除某个元素<br>*</li>
<li>@param {Node} element 需要移除的元素</li>
<li>@param {boolean} removeEventListeners 是否同时将所有注册在元素上的事件移除<br>*/<br>function removeElement(element, removeEventListeners) {<br> element.parent.removeChild(element);<br> if (removeEventListeners) {<pre><code>element.clearEventListeners();
</code></pre> }<br>}<br>可以转换为下面的签名：<br>/**</li>
<li>移除某个元素<br>*</li>
<li>@param {Node} element 需要移除的元素</li>
<li>@param {Object} options 相关的逻辑配置</li>
<li>@param {boolean} options.removeEventListeners 是否同时将所有注册在元素上的事件移除<br>*/<br>function removeElement(element, options) {<br> element.parent.removeChild(element);<br> if (options.removeEventListeners) {<pre><code>element.clearEventListeners();
</code></pre> }<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">这种模式有几个显著的优势：</div><div class="line">boolean 型的配置项具备名称，从调用的代码上更易理解其表达的逻辑意义。</div><div class="line">当配置项有增长时，无需无休止地增加参数个数，不会出现 removeElement(element, true, false, false, 3) 这样难以理解的调用代码。</div><div class="line">当部分配置参数可选时，多个参数的形式非常难处理重载逻辑，而使用一个 options 对象只需判断属性是否存在，实现得以简化。</div><div class="line">3.8.3. 闭包</div><div class="line">---</div><div class="line">[建议] 在适当的时候将闭包内大对象置为 null 。</div><div class="line">解释</div><div class="line">在 JavaScript 中，无需特别的关键词就可以使用闭包，一个函数可以任意访问在其定义的作用域外的变量。</div><div class="line">需要注意的是，函数的作用域是静态的，即在定义时决定，与调用的时机和方式没有任何关系。</div><div class="line">闭包会阻止一些变量的垃圾回收，对于较老旧的JavaScript引擎，可能导致外部所有变量均无法回收。</div><div class="line">首先一个较为明确的结论是，以下内容会影响到闭包内变量的回收：</div><div class="line">&gt; 嵌套的函数中是否有使用该变量。</div><div class="line">&gt; 嵌套的函数中是否有直接调用eval 。</div><div class="line">&gt; 是否使用了 with 表达式。</div><div class="line"></div><div class="line">Chakra、V8 和 SpiderMonkey 将受以上因素的影响，表现出不尽相同又较为相似的回收策略，</div><div class="line">而JScript.dll和Carakan则完全没有这方面的优化，会完整保留整个 LexicalEnvironment 中的所有变量绑定，造成一定的内存消耗。</div><div class="line">由于对闭包内变量有回收优化策略的 Chakra、V8 和 SpiderMonkey 引擎的行为较为相似，因此可以总结如下，当返回一个函数 fn 时：</div><div class="line">&gt; 如果 fn 的 [[Scope]] 是ObjectEnvironment（with 表达式生成 ObjectEnvironment，函数和 catch 表达式生成 DeclarativeEnvironment），则：</div><div class="line"></div><div class="line">1. 如果是 V8 引擎，则退出全过程。</div><div class="line">2. 如果是 SpiderMonkey，则处理该 ObjectEnvironment 的外层 LexicalEnvironment。</div><div class="line">&gt; 获取当前 LexicalEnvironment 下的所有类型为 Function 的对象，对于每一个 Function 对象，分析其 FunctionBody：</div><div class="line"></div><div class="line">1.如果 FunctionBody 中含有直接调用eval ，则退出全过程。</div><div class="line">2.否则得到所有的 Identifier。</div><div class="line">3.对于每一个 Identifier，设其为 name，根据查找变量引用的规则，从 LexicalEnvironment 中找出名称为 name 的绑定 binding。</div><div class="line">4.对 binding 添加 notSwap 属性，其值为 true。</div><div class="line">&gt; 检查当前 LexicalEnvironment 中的每一个变量绑定，如果该绑定有 notSwap 属性且值为 true，则：</div><div class="line"></div><div class="line">1.如果是V8引擎，删除该绑定。</div><div class="line">2.如果是SpiderMonkey，将该绑定的值设为 undefined，将删除 notSwap 属性。</div><div class="line">对于Chakra引擎，暂无法得知是按 V8 的模式还是按 SpiderMonkey 的模式进行。</div><div class="line">如果有 非常庞大 的对象，且预计会在老旧的引擎 中执行，则使用闭包时，注意将闭包不需要的对象置为空引用。</div><div class="line">[建议] 使用 IIFE 避免 Lift 效应 。</div><div class="line">解释</div><div class="line">在引用函数外部变量时，函数执行时外部变量的值由运行时决定而非定义时，最典型的场景如下：</div></pre></td></tr></table></figure>
</li>
</ul>
<p>var tasks = [];<br>for (var i = 0; i &lt; 5; i++) {<br>    tasks[tasks.length] = function () {<br>        console.log(‘Current cursor is at ‘ + i);<br>    };<br>}</p>
<p>var len = tasks.length;<br>while (len–) {<br>    tasks<a href="">len</a>;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">以上代码对 tasks 中的函数的执行均会输出 Current cursor is at 5，往往不符合预期。</div><div class="line">此现象称为Lift 效应 。解决的方式是通过额外加上一层闭包函数，将需要的外部变量作为参数传递来解除变量的绑定关系：</div></pre></td></tr></table></figure></p>
<p>var tasks = [];<br>for (var i = 0; i &lt; 5; i++) {<br>    // 注意有一层额外的闭包<br>    tasks[tasks.length] = (function (i) {<br>        return function () {<br>            console.log(‘Current cursor is at ‘ + i);<br>        };<br>    })(i);<br>}</p>
<p>var len = tasks.length;<br>while (len–) {<br>    tasks<a href="">len</a>;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">3.8.4. 空函数</div><div class="line">---</div><div class="line">[建议] 空函数不使用 `new Function()` 的形式。</div><div class="line">示例</div></pre></td></tr></table></figure></p>
<p>var emptyFunction = function () {};<br>``<br>[建议] 对于性能有高要求的场合，建议存在一个空函数的常量，供多处使用共享。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var EMPTY_FUNCTION = function () &#123;&#125;;</div><div class="line"></div><div class="line">function MyClass() &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">MyClass.prototype.abstractMethod = EMPTY_FUNCTION;</div><div class="line">MyClass.prototype.hooks.before = EMPTY_FUNCTION;</div><div class="line">MyClass.prototype.hooks.after = EMPTY_FUNCTION;</div></pre></td></tr></table></figure>
<h2 id="3-9-面向对象"><a href="#3-9-面向对象" class="headerlink" title="3.9. 面向对象"></a>3.9. 面向对象</h2><p>[强制] 类的继承方案，实现时需要修正 constructor。<br>解释<br>通常使用其他 library 的类继承方案都会进行 constructor 修正。如果是自己实现的类继承方案，需要进行 constructor 修正。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 构建类之间的继承关系</div><div class="line"> *</div><div class="line"> * @param &#123;Function&#125; subClass 子类函数</div><div class="line"> * @param &#123;Function&#125; superClass 父类函数</div><div class="line"> */</div><div class="line">function inherits(subClass, superClass) &#123;</div><div class="line">    var F = new Function();</div><div class="line">    F.prototype = superClass.prototype;</div><div class="line">    subClass.prototype = new F();</div><div class="line">    subClass.prototype.constructor = subClass;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>[建议] 声明类时，保证 constructor 的正确性。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">function Animal(name) &#123;</div><div class="line">    this.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 直接prototype等于对象时，需要修正constructor</div><div class="line">Animal.prototype = &#123;</div><div class="line">    constructor: Animal,</div><div class="line"></div><div class="line">    jump: function () &#123;</div><div class="line">        alert(&apos;animal &apos; + this.name + &apos; jump&apos;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// 这种方式扩展prototype则无需理会constructor</div><div class="line">Animal.prototype.jump = function () &#123;</div><div class="line">    alert(&apos;animal &apos; + this.name + &apos; jump&apos;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>[建议] 属性在构造函数中声明，方法在原型中声明。<br>解释<br>原型对象的成员被所有实例共享，能节约内存占用。所以编码时我们应该遵守这样的原则：原型对象包含程序不会修改的成员，如方法函数或配置项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function TextNode(value, engine) &#123;</div><div class="line">    this.value = value;</div><div class="line">    this.engine = engine;</div><div class="line">&#125;</div><div class="line"></div><div class="line">TextNode.prototype.clone = function () &#123;</div><div class="line">    return this;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>[强制] 自定义事件的 事件名 必须全小写。<br>解释<br>在 JavaScript 广泛应用的浏览器环境，绝大多数 DOM 事件名称都是全小写的。为了遵循大多数 JavaScript 开发者的习惯，在设计自定义事件时，事件名也应该全小写。<br>[强制] 自定义事件只能有一个 event 参数。如果事件需要传递较多信息，应仔细设计事件对象。<br>解释<br>一个事件对象的好处有：</p>
<blockquote>
<p>顺序无关，避免事件监听者需要记忆参数顺序。<br>每个事件信息都可以根据需要提供或者不提供，更自由。<br>扩展方便，未来添加事件信息时，无需考虑会破坏监听器参数形式而无法向后兼容。</p>
</blockquote>
<p>[建议] 设计自定义事件时，应考虑禁止默认行为。<br>解释<br>常见禁止默认行为的方式有两种：</p>
<blockquote>
<p>事件监听函数中 return false。<br>事件对象中包含禁止默认行为的方法，如 preventDefault。</p>
</blockquote>
<h2 id="3-10-动态特性"><a href="#3-10-动态特性" class="headerlink" title="3.10. 动态特性"></a>3.10. 动态特性</h2><h2 id="3-10-1-eval"><a href="#3-10-1-eval" class="headerlink" title="3.10.1. eval"></a>3.10.1. eval</h2><p>[强制] 避免使用直接 eval 函数。<br>解释<br>直接 eval，指的是以函数方式调用 eval 的调用方法。直接 eval 调用执行代码的作用域为本地作用域，应当避免。<br>如果有特殊情况需要使用直接 eval ，需在代码中用详细的注释说明为何必须使用直接 eval ，<br>不能使用其它动态执行代码的方式，同时需要其他资深工程师进行 Code Review。<br>[建议] 尽量避免使用 eval 函数。</p>
<h2 id="3-10-2-动态执行代码"><a href="#3-10-2-动态执行代码" class="headerlink" title="3.10.2. 动态执行代码"></a>3.10.2. 动态执行代码</h2><p>[建议] 使用 new Function 执行动态代码。<br>解释<br>通过 new Function 生成的函数作用域是全局使用域，不会影响当当前的本地作用域。如果有动态代码执行的需求，建议使用 new Function 。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var handler = new Function(&apos;x&apos;, &apos;y&apos;, &apos;return x + y;&apos;);</div><div class="line">var result = handler($(&apos;#x&apos;).val(), $(&apos;#y&apos;).val());</div></pre></td></tr></table></figure>
<h2 id="3-10-3-with"><a href="#3-10-3-with" class="headerlink" title="3.10.3. with"></a>3.10.3. with</h2><p>[建议] 尽量不要使用 with。<br>解释<br>使用 with 可能会增加代码的复杂度，不利于阅读和管理；也会对性能有影响。大多数使用 with 的场景都能使用其他方式较好的替代。所以，尽量不要使用 with。</p>
<h2 id="3-10-4-delete"><a href="#3-10-4-delete" class="headerlink" title="3.10.4. delete"></a>3.10.4. delete</h2><p>[建议] 减少 delete 的使用。<br>解释<br>如果没有特别的需求，减少或避免使用 delete 。delete 的使用会破坏部分 JavaScript 引擎的性能优化。<br>[建议] 处理 delete 可能产生的异常。<br>解释<br>对于有被遍历需求，且值 null 被认为具有业务逻辑意义的值的对象，移除某个属性必须使用 delete 操作。<br>在严格模式或IE下使用 delete 时，不能被删除的属性会抛出异常，因此在不确定属性是否可以删除的情况下，建议添加 try-catch 块。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">    delete o.x;</div><div class="line">&#125;</div><div class="line">catch (deleteError) &#123;</div><div class="line">    o.x = null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-10-5-对象属性"><a href="#3-10-5-对象属性" class="headerlink" title="3.10.5. 对象属性"></a>3.10.5. 对象属性</h2><p>[建议] 避免修改外部传入的对象。<br>解释<br>JavaScript 因其脚本语言的动态特性，当一个对象未被 seal 或 freeze 时，可以任意添加、删除、修改属性值。<br>但是随意地对 非自身控制的对象 进行修改，很容易造成代码在不可预知的情况下出现问题。因此，设计良好的组件、函数应该避免对外部传入的对象的修改。<br>下面代码的 selectNode 方法修改了由外部传入的 datasource 对象。如果 datasource 用在其它场合（如另一个 Tree 实例）下，会造成状态的混乱。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function Tree(datasource) &#123;</div><div class="line">    this.datasource = datasource;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Tree.prototype.selectNode = function (id) &#123;</div><div class="line">    // 从datasource中找出节点对象</div><div class="line">    var node = this.findNode(id);</div><div class="line">    if (node) &#123;</div><div class="line">        node.selected = true;</div><div class="line">        this.flushView();</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>对于此类场景，需要使用额外的对象来维护，使用由自身控制，不与外部产生任何交互的 selectedNodeIndex 对象来维护节点的选中状态，不对 datasource 作任何修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function Tree(datasource) &#123;</div><div class="line">    this.datasource = datasource;</div><div class="line">    this.selectedNodeIndex = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Tree.prototype.selectNode = function (id) &#123;</div><div class="line">    // 从datasource中找出节点对象</div><div class="line">    var node = this.findNode(id);</div><div class="line">    if (node) &#123;</div><div class="line">        this.selectedNodeIndex[id] = true;</div><div class="line">        this.flushView();</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>除此之外，也可以通过 deepClone 等手段将自身维护的对象与外部传入的分离，保证不会相互影响。<br>[建议] 具备强类型的设计。<br>解释<br>如果一个属性被设计为 boolean 类型，则不要使用 1 / 0 作为其值。对于标识性的属性，如对代码体积有严格要求，可以从一开始就设计为 number 类型且将 0 作为否定值。<br>从 DOM 中取出的值通常为 string 类型，如果有对象或函数的接收类型为 number 类型，提前作好转换，而不是期望对象、函数可以处理多类型的值。</p>
<h2 id="4-浏览器环境"><a href="#4-浏览器环境" class="headerlink" title="4. 浏览器环境"></a>4. 浏览器环境</h2><h2 id="4-1-模块化"><a href="#4-1-模块化" class="headerlink" title="4.1. 模块化"></a>4.1. 模块化</h2><h2 id="4-1-1-AMD"><a href="#4-1-1-AMD" class="headerlink" title="4.1.1. AMD"></a>4.1.1. AMD</h2><p>[强制] 使用 AMD 作为模块定义。<br>解释<br>AMD 作为由社区认可的模块定义形式，提供多种重载提供灵活的使用方式，并且绝大多数优秀的 Library 都支持 AMD，适合作为规范。<br>目前，比较成熟的 AMD Loader 有：</p>
<blockquote>
<p>官方实现的 <a href="http://requirejs.org/" target="_blank" rel="external">requirejs</a><br>百度自己实现的 <a href="https://github.com/ecomfe/esl" target="_blank" rel="external">esl</a></p>
</blockquote>
<p>[强制] 模块 id 必须符合标准。<br>解释<br>模块 id 必须符合以下约束条件：</p>
<blockquote>
<p>类型为 string，并且是由 / 分割的一系列 terms 来组成。例如：this/is/a/module。<br>term 应该符合 [a-zA-Z0-9_-]+ 规则。<br>不应该有 .js 后缀。<br>跟文件的路径保持一致。</p>
</blockquote>
<h2 id="4-1-2-define"><a href="#4-1-2-define" class="headerlink" title="4.1.2. define"></a>4.1.2. define</h2><p>[建议] 定义模块时不要指明 id 和 dependencies 。<br>解释<br>在 AMD 的设计思想里，模块名称是和所在路径相关的，匿名的模块更利于封包和迁移。模块依赖应在模块定义内部通过 local require 引用。<br>所以，推荐使用 define(factory) 的形式进行模块定义。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    function (require) &#123;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>[建议] 使用 return 来返回模块定义。<br>解释<br>使用 return 可以减少 factory 接收的参数（不需要接收 exports 和 module），在没有 AMD Loader 的场景下也更容易进行简单的处理来伪造一个 Loader。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    function (require) &#123;</div><div class="line">        var exports = &#123;&#125;;</div><div class="line"></div><div class="line">        // ...</div><div class="line"></div><div class="line">        return exports;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="4-1-3-require"><a href="#4-1-3-require" class="headerlink" title="4.1.3. require"></a>4.1.3. require</h2><p>[强制] 全局运行环境中，require 必须以 async require 形式调用。<br>解释<br>模块的加载过程是异步的，同步调用并无法保证得到正确的结果。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// good</div><div class="line">require([&apos;foo&apos;], function (foo) &#123;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// bad</div><div class="line">var foo = require(&apos;foo&apos;);</div></pre></td></tr></table></figure>
<p>[强制] 模块定义中只允许使用 local require ，不允许使用 global require 。<br>解释<br>在模块定义中使用 global require，对封装性是一种破坏。<br>在 AMD 里，global require 是可以被重命名的。并且 Loader 甚至没有全局的 require 变量，而是用 Loader 名称做为 global require。模块定义不应该依赖使用的 Loader。<br>[强制] Package在实现时，内部模块的 require 必须使用 relative id 。<br>解释<br>对于任何可能通过 发布-引入 的形式复用的第三方库、框架、包，开发者所定义的名称不代表使用者使用的名称。因此不要基于任何名称的假设。在实现源码中，require 自身的其它模块时使用 relative id。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    function (require) &#123;</div><div class="line">        var util = require(&apos;./util&apos;);</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>[建议] 不会被调用的依赖模块，在 factory 开始处统一 require。<br>解释<br>有些模块是依赖的模块，但不会在模块实现中被直接调用，最为典型的是 css / js / tpl 等 Plugin 所引入的外部内容。此类内容建议放在模块定义最开始处统一引用。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    function (require) &#123;</div><div class="line">        require(&apos;css!foo.css&apos;);</div><div class="line">        require(&apos;tpl!bar.tpl.html&apos;);</div><div class="line"></div><div class="line">        // ...</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="4-2-DOM"><a href="#4-2-DOM" class="headerlink" title="4.2. DOM"></a>4.2. DOM</h2><h2 id="4-2-1-元素获取"><a href="#4-2-1-元素获取" class="headerlink" title="4.2.1. 元素获取"></a>4.2.1. 元素获取</h2><p>[建议] 对于单个元素，尽可能使用 document.getElementById 获取，避免使用 document.all 。<br>[建议] 对于多个元素的集合，尽可能使用 context.getElementsByTagName 获取。其中 context 可以为 document 或其他元素。指定 tagName 参数为 * 可以获得所有子元素。<br>[建议] 遍历元素集合时，尽量缓存集合长度。如需多次操作同一集合，则应将集合转为数组。<br>解释<br>原生获取元素集合的结果并不直接引用 DOM 元素，而是对索引进行读取，所以 DOM 结构的改变会实时反映到结果中。<br>示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;span&gt;&lt;/span&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">var elements = document.getElementsByTagName(&apos;*&apos;);</div><div class="line"></div><div class="line">// 显示为 DIV</div><div class="line">alert(elements[0].tagName);</div><div class="line"></div><div class="line">var div = elements[0];</div><div class="line">var p = document.createElement(&apos;p&apos;);</div><div class="line">docpment.body.insertBefore(p, div);</div><div class="line"></div><div class="line">// 显示为 P</div><div class="line">alert(elements[0].tagName);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>[建议] 获取元素的直接子元素时使用 children。避免使用 childNodes ，除非预期是需要包含文本、注释和属性类型的节点。</p>
<h2 id="4-2-2-样式获取"><a href="#4-2-2-样式获取" class="headerlink" title="4.2.2. 样式获取"></a>4.2.2. 样式获取</h2><p>·[建议] 获取元素实际样式信息时，应使用 getComputedStyle 或 currentStyle 。<br>解释<br>通过 style 只能获得内联定义或通过 JavaScript 直接设置的样式。通过 CSS class 设置的元素样式无法直接通过 style 获取。<br>4.2.3. 样式设置<br>·[建议] 尽可能通过为元素添加预定义的 className 来改变元素样式，避免直接操作 style 设置。<br>·[强制] 通过 style 对象设置元素样式时，对于带单位非 0 值的属性，不允许省略单位。<br>解释<br>除了 IE，标准浏览器会忽略不规范的属性值，导致兼容性问题。<br>4.2.4. DOM 操作<br>[建议] 操作 DOM 时，尽量减少页面 reflow。<br>解释<br>页面 reflow 是非常耗时的行为，非常容易导致性能瓶颈。下面一些场景会触发浏览器的reflow：</p>
<blockquote>
<p>DOM元素的添加、修改（内容）、删除。<br>应用新的样式或者修改任何影响元素布局的属性。<br>Resize浏览器窗口、滚动页面。<br>读取元素的某些属性（offsetLeft、offsetTop、offsetHeight、offsetWidth、scrollTop/Left/Width/Height、clientTop/Left/Width/Height、getComputedStyle()、currentStyle(in IE)) `。</p>
</blockquote>
<p>[建议] 尽量减少 DOM 操作。<br>解释<br>DOM 操作也是非常耗时的一种操作，减少 DOM 操作有助于提高性能。举一个简单的例子，构建一个列表。我们可以用两种方式：<br>在循环体中 createElement 并 append 到父元素中。<br>在循环体中拼接 HTML 字符串，循环结束后写父元素的 innerHTML。<br>第一种方法看起来比较标准，但是每次循环都会对 DOM 进行操作，性能极低。在这里推荐使用第二种方法。</p>
<h2 id="4-2-5-DOM-事件"><a href="#4-2-5-DOM-事件" class="headerlink" title="4.2.5. DOM 事件"></a>4.2.5. DOM 事件</h2><p>[建议] 优先使用 addEventListener / attachEvent 绑定事件，避免直接在 HTML 属性中或 DOM 的 expando 属性绑定事件处理。<br>解释<br>expando 属性绑定事件容易导致互相覆盖。<br>[建议] 使用 addEventListener 时第三个参数使用 false。<br>解释<br>标准浏览器中的 addEventListener 可以通过第三个参数指定两种时间触发模型：冒泡和捕获。而 IE 的 attachEvent 仅支持冒泡的事件触发。所以为了保持一致性，通常 addEventListener 的第三个参数都为 false。<br>[建议] 在没有事件自动管理的框架支持下，应持有监听器函数的引用，在适当时候（元素释放、页面卸载等）移除添加的监听器。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/js/" rel="tag"># -js</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/28/CSS编码规范/" rel="next" title="CSS编码规范">
                <i class="fa fa-chevron-left"></i> CSS编码规范
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/06/30/JS基础操作/" rel="prev" title="JS基础操作">
                JS基础操作 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.jpg"
                alt="Adele" />
            
              <p class="site-author-name" itemprop="name">Adele</p>
              <p class="site-description motion-element" itemprop="description">Coding Peasant</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-前言"><span class="nav-number">1.</span> <span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-代码风格"><span class="nav-number">2.</span> <span class="nav-text">2. 代码风格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-文件"><span class="nav-number">3.</span> <span class="nav-text">2.1. 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-结构"><span class="nav-number">4.</span> <span class="nav-text">2.2. 结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-1-缩进"><span class="nav-number">5.</span> <span class="nav-text">2.2.1. 缩进</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-2-空格"><span class="nav-number">6.</span> <span class="nav-text">2.2.2. 空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-3-换行"><span class="nav-number">7.</span> <span class="nav-text">2.2.3. 换行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-4-语句"><span class="nav-number">8.</span> <span class="nav-text">2.2.4. 语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-命名"><span class="nav-number">9.</span> <span class="nav-text">2.3. 命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-9-面向对象"><span class="nav-number">10.</span> <span class="nav-text">3.9. 面向对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-动态特性"><span class="nav-number">11.</span> <span class="nav-text">3.10. 动态特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-1-eval"><span class="nav-number">12.</span> <span class="nav-text">3.10.1. eval</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-2-动态执行代码"><span class="nav-number">13.</span> <span class="nav-text">3.10.2. 动态执行代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-3-with"><span class="nav-number">14.</span> <span class="nav-text">3.10.3. with</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-4-delete"><span class="nav-number">15.</span> <span class="nav-text">3.10.4. delete</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-5-对象属性"><span class="nav-number">16.</span> <span class="nav-text">3.10.5. 对象属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-浏览器环境"><span class="nav-number">17.</span> <span class="nav-text">4. 浏览器环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-模块化"><span class="nav-number">18.</span> <span class="nav-text">4.1. 模块化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-1-AMD"><span class="nav-number">19.</span> <span class="nav-text">4.1.1. AMD</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-2-define"><span class="nav-number">20.</span> <span class="nav-text">4.1.2. define</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-3-require"><span class="nav-number">21.</span> <span class="nav-text">4.1.3. require</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-DOM"><span class="nav-number">22.</span> <span class="nav-text">4.2. DOM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-1-元素获取"><span class="nav-number">23.</span> <span class="nav-text">4.2.1. 元素获取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-2-样式获取"><span class="nav-number">24.</span> <span class="nav-text">4.2.2. 样式获取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-5-DOM-事件"><span class="nav-number">25.</span> <span class="nav-text">4.2.5. DOM 事件</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Adele</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
